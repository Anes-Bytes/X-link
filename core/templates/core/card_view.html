<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Business Card - X-Link</title>
    {% if user_card.black_background %}
    <link rel="stylesheet" href="{% static 'card-template-black.css' %}">

    {% elif user_card.color == "blue" %}
<link rel="stylesheet" href="{% static 'card-template-blue.css' %}">
{% elif user_card.color == "gold" %}
<link rel="stylesheet" href="{% static 'card-template-gold.css' %}">
{% elif user_card.color == "orange" %}
<link rel="stylesheet" href="{% static 'card-template-orange.css' %}">
{% elif user_card.color == "gray" %}
<link rel="stylesheet" href="{% static 'card-template-gray.css' %}">
{% elif user_card.color == "mint" %}
<link rel="stylesheet" href="{% static 'card-template-mint.css' %}">
{% elif user_card.color == "pink" %}
<link rel="stylesheet" href="{% static 'card-template-pink.css' %}">
{% elif user_card.color == "purple" %}
<link rel="stylesheet" href="{% static 'card-template-purple.css' %}">
{% elif user_card.color == "red" %}
<link rel="stylesheet" href="{% static 'card-template-red.css' %}">
{% elif user_card.color == "green" %}
<link rel="stylesheet" href="{% static 'card-template-green.css' %}">
{% else %}
<link rel="stylesheet" href="{% static 'card-template.css' %}">
{% endif %}
    <link rel="stylesheet" href="{% static 'services-portfolio.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
{% if user_card.stars_background %}
            <canvas id="star-bg-canvas" style="position: absolute; inset: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none;"></canvas>
{% endif %}


    <!-- Animated Background -->
    <div class="background-container">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Main Card Container -->
    <div class="card-wrapper">

        <div class="business-card" id="businessCard">
            <!-- Profile Section -->
            <div class="card-section profile-section">
                <div class="profile-image-wrapper">
                    <div class="profile-image">
                        <img src="{{ user_card.profile_picture.url }}" alt="Profile" id="profileImg">
                        <div class="image-glow"></div>
                    </div>
                </div>
                <h1 class="full-name" id="fullName">{{ user_card.name }} <!-- Telegram-like blue verification badge -->
<!-- Official-style circular badge -->
{% if user_card.blue_tick %}
        <svg width="22" height="22" viewBox="0 0 24 24" class="telegram-badge"
             xmlns="http://www.w3.org/2000/svg">
            <path fill="#3CAEEB" stroke="#1C96DA" stroke-width="1"
                  d="M12 1.5l3 2.8 3.9-.6.6 3.9 2.8 3-2.8 3 .6 3.9-3.9-.6-3 2.8-3-2.8-3.9.6.6-3.9-2.8-3 2.8-3-.6-3.9 3.9.6z"/>
            <path fill="#fff"
                  d="M10.2 13.7l-2.1-2.2-1.2 1.2 3.3 3.3 6.4-6.6-1.2-1.2z"/>
        </svg>
                    {% endif %}

</h1>

                <p class="job-title" id="jobTitle">{{ user_card.short_bio }}</p>
                <p class="short-bio" id="shortBio">{{ user_card.description }}</p>
            </div>

            <!-- Contact Buttons -->
            <div class="card-section contact-section">
                {% if user_card.phone_number %}
                <a href="tel:{{ user_card.phone_number }}" class="contact-btn phone-btn" id="phoneBtn">
                    <i class="fas fa-phone"></i>
                    <span id="phoneText">{{ user_card.phone_number }}</span>
                </a>
                {% endif %}
                {% if user_card.email %}
                <a href="mailto:{{ user_card.email }}" class="contact-btn email-btn" id="emailBtn">
                    <i class="fas fa-envelope"></i>
                    <span id="emailText">{{ user_card.email }}</span>
                </a>
                {% endif %}
                {% if user_card.website %}
                <a href="{{ user_card.website }}" target="_blank" class="contact-btn website-btn" id="websiteBtn">
                    <i class="fas fa-globe"></i>
                    <span id="websiteText">{{ user_card.website }}</span>
                </a>
                {% endif %}
            </div>

            <!-- Social Links -->
            <div class="card-section social-section">
                <div class="social-links" id="socialLinks">
                    {% if user_card.instagram_username %}
                    <a href="https://instagram.com/{{ user_card.instagram_username }}" class="social-link" data-platform="instagram" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    {% endif %}
                    {% if user_card.telegram_username %}
                    <a href="https://t.me/{{ user_card.telegram_username }}" class="social-link" data-platform="telegram" aria-label="Telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </a>
                    {% endif %}
                    {% if user_card.linkedin_username %}
                    <a href="https://www.linkedin.com/in/{{ user_card.linkedin_username }}" class="social-link" data-platform="linkedin" aria-label="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    {% endif %}
                    {% if user_card.github_username %}
                    <a href="https://instagram.com/{{ user_card.github_username }}" class="social-link" data-platform="github" aria-label="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    {% endif %}
                    {% if user_card.twitter_username %}
                    <a href="https://x.com/@{{ user_card.twitter_username }}" class="social-link" data-platform="twitter" aria-label="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    {% endif %}
                    {% if user_card.instagram_username %}
                    <a href="#" class="social-link" data-platform="youtube" aria-label="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    {% endif %}
                </div>
            </div>

            <!-- Skills Section -->
            <div class="card-section skills-section">
                <h3 class="section-title">توانایی ها</h3>
                <div class="skills-container" id="skillsContainer">
                    {% for skill in user_card.skills.all %}
                    <span class="skill-pill">{{ skill.name  }}</span>
                    {% endfor %}
                </div>
            </div>

            <!-- Services Section -->
            <div class="card-section services-section">
                <h3 class="section-title">Services</h3>
                <div class="services-container" id="servicesContainer">
                    {% for service in user_card.services.all %}
                    <div class="service-item" data-service-id="{{ service.id }}">
                        {% if service.icon %}
                        <i class="{{ service.icon }}"></i>
                        {% else %}
                        <i class="fas fa-star"></i>
                        {% endif %}
                        <div class="service-content">
                            <h4 class="service-title">{{ service.title }}</h4>
                            {% if service.description %}
                            <p class="service-description">{{ service.description }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% empty %}
                    <p class="empty-state">No services added yet</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Portfolio Section -->
            <div class="card-section portfolio-section">
                <h3 class="section-title">Portfolio</h3>
                <div class="portfolio-grid" id="portfolioGrid">
                    {% for portfolio in user_card.portfolio_items.all %}
                    <div class="portfolio-item" data-portfolio-id="{{ portfolio.id }}">
                        <div class="portfolio-thumbnail">
                            <img src="{{ portfolio.image.url }}" alt="{{ portfolio.title }}">
                            <div class="portfolio-overlay">
                                {% if portfolio.url %}
                                <a href="{{ portfolio.url }}" class="portfolio-link" target="_blank" rel="noopener noreferrer">
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="portfolio-content">
                            <h4 class="portfolio-title">{{ portfolio.title }}</h4>
                            {% if portfolio.description %}
                            <p class="portfolio-description">{{ portfolio.description }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% empty %}
                    <p class="empty-state">No portfolio items added yet</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Mini Footer -->
<div class="mini-footer">
    <p>
        با <span class="brand">X-Link</span> کارت ویزیت دیجیتال خودتو بساز
        <i class="fas fa-bolt"></i>
    </p>
    <a href="{% url 'home' %}" target="_blank" class="mini-footer-btn">
        شروع ساخت کارت
    </a>
</div>

<style>
    .mini-footer {
        text-align: center;
        padding: 20px 15px;
        margin-top: 40px;
        color: #fff;
        font-family: 'Poppins', 'Inter', sans-serif;
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        animation: fadeUp 0.8s ease;
    }

    .mini-footer .brand {
        font-weight: 700;
        color: #00ffcc;
    }

    .mini-footer-btn {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 22px;
        border-radius: 12px;
        color: #0a0f1f;
        background: linear-gradient(135deg, #00ffcc, #00d4ff);
        font-weight: 600;
        text-decoration: none;
        transition: 0.25s;
    }

    .mini-footer-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 255, 204, 0.35);
    }

    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

    </div>
<script>
const canvas = document.getElementById('star-bg-canvas');
const ctx = canvas.getContext('2d');
canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;

// Generate stars
const stars = [];
for (let i = 0; i < 150; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 1.2,
        alpha: Math.random(),
        speed: Math.random() * 0.02
    });
}

// Shooting stars
let shootingStars = [];

function createShootingStar() {
    shootingStars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height / 2,
        length: 100 + Math.random() * 100,
        speed: 5 + Math.random() * 5,
        angle: Math.PI / 4
    });
}

function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw stars
    stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.radius, 0, 2 * Math.PI);
        ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
        ctx.fill();
        s.alpha += s.speed;
        if (s.alpha > 1) s.alpha = 0;
    });

    // Draw shooting stars
    shootingStars.forEach((s, i) => {
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x - s.length * Math.cos(s.angle), s.y - s.length * Math.sin(s.angle));
        ctx.stroke();
        s.x += s.speed * Math.cos(s.angle);
        s.y += s.speed * Math.sin(s.angle);
        if (s.x > canvas.width || s.y > canvas.height) shootingStars.splice(i, 1);
    });

    // Occasionally spawn shooting stars
    if (Math.random() < 0.01) createShootingStar();

    requestAnimationFrame(update);
}

update();
</script>

    <script src="card-template.js"></script>
</body>
</html>


