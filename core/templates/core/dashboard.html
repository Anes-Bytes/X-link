<!DOCTYPE html>
{% load static %}
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ø±Ø¨Ø± - X-Link</title>
    <link rel="stylesheet" href="{% static 'dashboard-themed.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        [dir="rtl"] .sidebar { border-right: none; border-left: 1px solid var(--card-border); }
        [dir="rtl"] .nav-link { border-left: none; border-right: 3px solid transparent; padding-right: 1.5rem; padding-left: 0; }
        [dir="rtl"] .nav-item.active .nav-link { border-right-color: var(--cyan-neon); border-left: none; }
        [dir="rtl"] .dashboard-header { text-align: right; }
        [dir="rtl"] .header-profile { flex-direction: row-reverse; }
        [dir="rtl"] .notification-dropdown { right: auto; left: 2rem; }
        [dir="rtl"] .stat-card { flex-direction: row-reverse; }
        [dir="rtl"] .link-item { flex-direction: row-reverse; }
        [dir="rtl"] .login-item { flex-direction: row-reverse; }
        [dir="rtl"] .session-item { flex-direction: row-reverse; }
        [dir="rtl"] .notification-item { flex-direction: row-reverse; }
        [dir="rtl"] table { text-align: right; }
        [dir="rtl"] .detail-row { flex-direction: row-reverse; }
        [dir="rtl"] .activity-item { flex-direction: row-reverse; }
        [dir="rtl"] .profile-menu-trigger { flex-direction: row-reverse; }
    </style>
</head>
<body class="x-link-theme">
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-link"></i>
                    <span>Ø§ÛŒÚ©Ø³â€ŒÙ„ÛŒÙ†Ú©</span>
                </div>
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#overview" class="nav-link" data-section="overview">
                            <i class="fas fa-user"></i>
                            <span>Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø¬Ù…Ø§Ù„ÛŒ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#visit-card" class="nav-link" data-section="visit-card">
                            <i class="fas fa-id-card"></i>
                            <span>Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØª</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#plan" class="nav-link" data-section="plan">
                            <i class="fas fa-crown"></i>
                            <span>Ø·Ø±Ø­ Ùˆ Ø§Ø´ØªØ±Ø§Ú©</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <button class="mode-toggle" id="modeToggle" title="ØªØºÛŒÛŒØ± ØªÙ… Ø´Ø¨">
                    <i class="fas fa-moon"></i>
                </button>
                <a href="{% url 'logout' %}" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Ø®Ø±ÙˆØ¬</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ <span id="userName">{{ user.first_name }}</span></h1>
                    <p id="headerDate" class="header-date"></p>
                </div>
                <div class="header-right">
                    <button class="notification-btn" id="notificationBtn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">2</span>
                    </button>
                    <div class="header-profile">
                        <img id="headerProfileImg" src="{{ user_card.profile_picture.url }}" alt="Ù¾Ø±ÙˆÙØ§ÛŒÙ„" class="profile-img-small">
                        <div class="profile-menu-trigger">
                            <span id="headerUsername">{{ user.username }}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Notifications Dropdown -->
            <div class="notification-dropdown" id="notificationDropdown" style="display: none;">
                <div class="notification-header">
                    <h3>Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§</h3>
                    <button class="close-btn">Ã—</button>
                </div>
                <div class="notification-list">
                    {% if messages %}
                    {% for message in messages %}
                    <div class="notification-item unread">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="notification-content">
                            <p class="notification-title">{{ message.text }}</p>
                            <p class="notification-time">{{ message.created_at }}</p>
                        </div>
                    </div>
                    {% endfor %}
                    {% endif %}
                </div>
            </div>

            <!-- Content Sections -->
            <div class="content-wrapper">

                <!-- 1. OVERVIEW SECTION -->
                <section id="overview-section" class="section active">
                    <div class="section-header">
                        <h2>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±</h2>
                        <button class="btn btn-primary" id="editProfileBtn">
                            <i class="fas fa-edit"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                        </button>
                    </div>

                    <div class="overview-grid">
                        <!-- Profile Card -->
                        <div class="card profile-card">
                            <div class="profile-header">
                                <div class="profile-image-container">
                                    <img id="profileImg" src="{{ user_card.profile_picture.url }}" alt="Ù¾Ø±ÙˆÙØ§ÛŒÙ„" class="profile-img">
                                    <button class="edit-image-btn" id="editImageBtn">
                                        <i class="fas fa-camera"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="profile-info">
                                <h3 id="fullName">{{ user.full_name }}</h3>
                                <p class="username" id="username">{{ user_card.username }}@</p>
                                <div class="profile-details">
                                    <div class="detail-row">
                                        <span class="label">{{ user.email }}</span>
                                        <span class="value" id="emailDisplay">Ø§ÛŒÙ…ÛŒÙ„:</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">{{ user.phone|default:"ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡" }}</span>
                                        <span class="value" id="phoneDisplay">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">{{ user.date_joined|date:"M d, Y" }}</span>
                                        <span class="value" id="joinedDate">ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª:</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label">{{ user.last_login|date:"M d, Y - H:i" }}</span>
                                        <span class="value" id="lastLogin">Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯:</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <i class="fas fa-id-card"></i>
                                </div>
                                <div class="stat-content">
                                    <p class="stat-label">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒØ²ÛŒØª</p>
                                    <p class="stat-value" id="cardCount">1</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                    <i class="fas fa-mouse"></i>
                                </div>
                                <div class="stat-content">
                                    <p class="stat-label">Ú©Ù„ Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§</p>
                                    <p class="stat-value" id="totalClicks">{{ user_card.views|default:"0" }}</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="stat-content">
                                    <p class="stat-label">Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</p>
                                    <p class="stat-value" id="profileViews">{{ user_card.views|default:"0" }}</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                        <div class="stat-content">
                            <p class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø´ØªØ±Ø§Ú©</p>

                            {% if user.plan_expires is None %}
                                <p class="expiry-date unlimited">â™¾ï¸ Ø§Ø´ØªØ±Ø§Ú© Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</p>

                            {% elif user.plan_expires == 0 %}
                                <p class="expiry-date expired">â›” Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡</p>

                            {% else %}
                                <p class="expiry-date active">
                                    {{ user.plan_expires }} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
                                </p>
                            {% endif %}
                        </div>


                            </div>
                        </div>
                    </div>

                    <!-- Profile Completion Progress -->

                </section>

                <!-- 2. VISIT CARD SECTION -->
                <section id="visit-card-section" class="section" style="display: none;">
                {% if user_card %}
                    <div class="section-header">
                        <h2>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒØ²ÛŒØª Ø´Ù…Ø§</h2>
                        <button class="btn btn-primary" id="createCardBtn">
                            <i class="fas fa-plus"></i> Ú©Ø§Ø±Øª Ø¬Ø¯ÛŒØ¯
                        </button>
                    </div>

                    <div class="cards-grid">
                        <!-- Primary Card -->
                        <div class="card visit-card-preview">
                            <div class="card-badge">Ø§ØµÙ„ÛŒ</div>
                            <h3 id="cardTitle">{{ user_card.title|default:"Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØª Ù…Ù†" }}</h3>
                            <p class="card-link" id="cardLink">
                                <i class="fas fa-link"></i>
                                <span>x-link.ir/{{ user_card.username }}</span>
                            </p>

                <div class="qr-code-box">
                    <h3>Ú©Ø¯ QR:</h3>
                    <div class="qr-code-display">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={{ card_url }}"
                             alt="QR Code" class="qr-code-image">
                    </div>
                </div>

<div class="card-actions">
    <a href="{% url 'view_card' user_card.username %}" class="btn btn-secondary btn-small">
        <i class="fas fa-eye"></i> Ù…Ø´Ø§Ù‡Ø¯Ù‡
    </a>

    <a href="{% url 'card_builder' %}" class="btn btn-secondary btn-small">
        <i class="fas fa-edit"></i> ÙˆÛŒØ±Ø§ÛŒØ´
    </a>

    <a href="" class="btn btn-secondary btn-small">
        <i class="fas fa-download"></i> QR
    </a>
</div>

                        </div>

                        <!-- Additional Cards Info -->
                        <div class="card">
                            <h4>Ø¢Ù…Ø§Ø± Ú©Ø§Ø±Øª</h4>
                            <div class="stats-mini">
                                <div class="stat-mini">
                                    <span class="label">Ø¨Ø§Ø²Ø¯ÛŒØ¯</span>
                                    <span class="value">{{ user_card.views }}</span>
                                </div>
                                <div class="stat-mini">
                                    <span class="label">Ú©Ù„ÛŒÚ©</span>
                                    <span class="value">{{ user_card.views }}</span>
                                </div>
                                <div class="stat-mini">
                                    <span class="label">Ø§Ø´ØªØ±Ø§Ú©</span>
                                    <span class="value">Ø¨Ø²ÙˆØ¯ÛŒ</span>
                                </div>
                                <div class="stat-mini">
                                    <span class="label">Ù†Ø±Ø® Ú©Ù„ÛŒÚ©</span>
                                    <span class="value">Ø¨Ø²ÙˆØ¯ÛŒ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card Details -->
                    <div class="card">
                        <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Øª</h3>
                        <div class="details-grid">
                            <div class="detail-field">
                                <label>Ø³Ø¨Ú© Ú©Ø§Ø±Øª</label>
                                <span>{{ user_card.get_color_display }}</span>
                            </div>
                            <div class="detail-field">
                                <label>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯</label>
                                <span>{{ user_card.created_at|date:"M d, Y" }}</span>
                            </div>
                            <div class="detail-field">
                                <label>Ø¢Ø®Ø±ÛŒÙ† ØªØºÛŒÛŒØ±</label>
                                <span>{{ user_card.updated_at|date:"M d, Y - H:i" }}</span>
                            </div>
                            <div class="detail-field">
                                <label>ÙˆØ¶Ø¹ÛŒØª</label>
                                {% if user_card.is_published %}
                                <span class="badge badge-success">ÙØ¹Ø§Ù„</span>
                                {% else %}
<span class="badge badge-danger">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                                    {% else %}
    <div class="empty-card">
        <i class="fas fa-id-card empty-icon"></i>
        <h2>Ù‡Ù†ÙˆØ² Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØªÛŒ Ù†Ø¯Ø§Ø±ÛŒ ğŸ˜•</h2>
        <p>
            Ø¨Ø§ Ø³Ø§Ø®Øª Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØª Ø¯ÛŒØ¬ÛŒØªØ§Ù„ØŒ Ù„ÛŒÙ†Ú© Ø§Ø®ØªØµØ§ØµÛŒØŒ QR Ú©Ø¯ Ùˆ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´
        </p>
        <a href="{% url 'card_builder' %}" class="btn btn-primary btn-lg">
            ğŸš€ Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† Ú©Ø§Ø±Øª ÙˆÛŒØ²ÛŒØª Ø®ÙˆØ¯ØªÙˆ Ø¨Ø³Ø§Ø²
        </a>
    </div>
{% endif %}
                </section>

                <!-- 3. PLAN & SUBSCRIPTION SECTION -->
                <section id="plan-section" class="section" style="display: none;">
                    <div class="section-header">
                        <h2>Ø·Ø±Ø­ Ùˆ Ø§Ø´ØªØ±Ø§Ú©</h2>
                    </div>

                    <!-- Current Plan Card -->
                    <div class="plan-cards">
                        {% if has_basic_plan %}
                        <div class="card plan-card active-plan">
                            <div class="plan-badge">Ù¾Ø§ÛŒÙ‡</div>
                            <h3>Ù¾Ù„Ù† Ù¾Ø§ÛŒÙ‡</h3>
                            <p class="plan-price">
                               <span id="planPrice">35,000</span>
                                <span class="period">/Ù…Ø§Ù‡Ø§Ù†Ù‡</span>
                            </p>

                            <div class="plan-features">
                                <h4>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ø§Ù…Ù„:</h4>
                                <ul>
                                    <li><i class="fas fa-check"></i> Ø¨Ø±Ù†Ø¯Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</li>
                                    <li><i class="fas fa-check"></i>Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‚Ø§Ù„Ø¨ Ùˆ ØªÙ… Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡</li>
                                    <li><i class="fas fa-check"></i>Ø¢Ù¾ØªØ§ÛŒÙ… 99.9%</li>
                                </ul>
                            </div>

<div class="stat-content">
    <p class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø´ØªØ±Ø§Ú©</p>

    {% if user.plan_expires is None %}
        <p class="expiry-date unlimited">â™¾ï¸ Ø§Ø´ØªØ±Ø§Ú© Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</p>

    {% elif user.plan_expires == 0 %}
        <p class="expiry-date expired">â›” Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡</p>

    {% else %}
        <p class="expiry-date active">
            {{ user.plan_expires }} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
        </p>
    {% endif %}
</div>

                        </div>
                        {% elif has_pro_plan %}
                        <div class="card plan-card active-plan">
                            <div class="plan-badge">Ù¾Ø±Ù…ÛŒÙˆÙ…</div>
                            <h3>Ù¾Ù„Ù† Ù¾Ø±Ù…ÛŒÙˆÙ…</h3>
                            <p class="plan-price">
                               <span id="planPrice">55,000</span>
                                <span class="period">/Ù…Ø§Ù‡Ø§Ù†Ù‡</span>
                            </p>

                            <div class="plan-features">
                                <h4>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ø§Ù…Ù„:</h4>
                                <ul>
                                    <li><i class="fas fa-check"></i> Ø¨Ø±Ù†Ø¯Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</li>
                                    <li><i class="fas fa-check"></i>Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‡Ù…Ù‡ Ù‚Ø§Ù„Ø¨ Ùˆ ØªÙ… Ù‡Ø§</li>
                                    <li><i class="fas fa-check"></i>ØªÛŒÚ© Ø¢Ø¨ÛŒ</li>
                                    <li><i class="fas fa-check"></i>ØªÙ…Ù¾Ù„ÛŒØª Ù…Ø´Ú©ÛŒ</li>
                                    <li><i class="fas fa-check"></i>Ø¨Ú© Ú¯Ø±Ø§Ù†Ø¯ Ø³ØªØ§Ø±Ù‡ Ø§ÛŒ</li>
                                    <li><i class="fas fa-check"></i>Ø³Ø±Ø¹Øª Ù„ÙˆØ¯ Ø¨ÛŒØ´ØªØ±</li>
                                    <li><i class="fas fa-check"></i>Ø¢Ù¾ØªØ§ÛŒÙ… 99.9%</li>
                                </ul>
                            </div>

<div class="stat-content">
    <p class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø´ØªØ±Ø§Ú©</p>

    {% if user.plan_expires is None %}
        <p class="expiry-date unlimited">â™¾ï¸ Ø§Ø´ØªØ±Ø§Ú© Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</p>

    {% elif user.plan_expires == 0 %}
        <p class="expiry-date expired">â›” Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡</p>

    {% else %}
        <p class="expiry-date active">
            {{ user.plan_expires }} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
        </p>
    {% endif %}
</div>

                        </div>
                        {% else %}
                        <div class="card plan-card active-plan">
                            <div class="plan-badge">Ø±Ø§ÛŒÚ¯Ø§Ù†</div>
                            <h3>Ù¾Ù„Ù† Ø±Ø§ÛŒÚ¯Ø§Ù†</h3>
                            <p class="plan-price">
                               <span id="planPrice">0</span>
                                <span class="period">/Ù…Ø§Ù‡Ø§Ù†Ù‡</span>
                            </p>

                            <div class="plan-features">
                                <h4>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ø§Ù…Ù„:</h4>
                                <ul>
                                    <li><i class="fas fa-check"></i> Ø¨Ø±Ù†Ø¯Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</li>
                                    <li><i class="fas fa-check"></i>Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‚Ø§Ù„Ø¨ Ù¾ÛŒØ´ÙØ±Ø¶ Ø§ÛŒÚ©Ø³ Ù„ÛŒÙ†Ú©</li>
                                    <li><i class="fas fa-check"></i>Ø¢Ù¾ØªØ§ÛŒÙ… 99.9%</li>
                                </ul>
                            </div>

<div class="stat-content">
    <p class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø´ØªØ±Ø§Ú©</p>

    {% if user.plan_expires is None %}
        <p class="expiry-date unlimited">â™¾ï¸ Ø§Ø´ØªØ±Ø§Ú© Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</p>

    {% elif user.plan_expires == 0 %}
        <p class="expiry-date expired">â›” Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡</p>

    {% else %}
        <p class="expiry-date active">
            {{ user.plan_expires }} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
        </p>
    {% endif %}
</div>


                        </div>
                        {% endif %}
                        <!-- Usage Stats -->
                        <div class="card">
                            <h3>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</h3>
                            <div class="usage-item">
                                <div class="usage-header">
                                    <span class="label">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒØ²ÛŒØª Ø§ÛŒØ¬Ø§Ø¯â€ŒØ´Ø¯Ù‡</span>
                                    <span class="value"><span id="cardsUsed">{{ user_cards.count|default:"3" }}</span> / <span id="cardsMax">{{ user_plan.max_cards|default:"5" }}</span></span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%"></div>
                                </div>
                            </div>

                            <div class="usage-item">
                                <div class="usage-header">
                                    <span class="label">Ø§Ø¹Ø¶Ø§ÛŒ ØªÛŒÙ…</span>
                                    <span class="value"><span id="teamUsed">1</span> / <span id="teamMax">3</span></span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 33.33%"></div>
                                </div>
                            </div>

                            <div class="usage-item">
                                <div class="usage-header">
                                    <span class="label">ÙØ¶Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØ´Ø¯Ù‡</span>
                                    <span class="value"><span id="storageUsed">245</span>MB / <span id="storageMax">1000</span>MB</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 24.5%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Plan Comparison -->
                    <div class="card">
                        <h3>Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø·Ø±Ø­â€ŒÙ‡Ø§</h3>
                        <table class="plan-comparison">
                            <thead>
                                <tr>
                                    <th>ÙˆÛŒÚ˜Ú¯ÛŒ</th>
                                    <th>Ø±Ø§ÛŒÚ¯Ø§Ù†</th>
                                    <th>Ù¾Ø§ÛŒÙ‡</th>
                                    <th>Ù¾Ø±Ùˆ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Ù‚Ø§Ù„Ø¨ Ùˆ ØªÙ… Ù‡Ø§</td>
                                    <td>Ù¾ÛŒØ´ÙØ±Ø¶ Ø§ÛŒÚ©Ø³ Ù„ÛŒÙ†Ú©</td>
                                    <td>Ù‡Ù…Ù‡ ØªÙ…Ù¾Ù„ÛŒØª Ù‡Ø§</td>
                                    <td>Ù‡Ù…Ù‡ ØªÙ…Ù„ÛŒÙ¾Øª Ù‡Ø§ + Ù…Ø´Ú©ÛŒ</td>
                                </tr>
                                <tr>
                                    <td>Ø¨Ø®Ø´ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-check"></i></td>
                                    <td><i class="fas fa-check"></i></td>
                                </tr>
                                <tr>
                                    <td>ØªÛŒÚ© Ø¢Ø¨ÛŒ</td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-check"></i></td>
                                </tr>
                                <tr>
                                    <td>Ø¨Ú© Ú¯Ø±Ø§Ù†Ø¯ Ø³ØªØ§Ø±Ù‡ Ø§ÛŒ(Ø¯Ù†Ø¨Ø§Ù„Ù‡ Ø¯Ø§Ø±)</td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-check"></i></td>
                                </tr>
                                <tr>
                                    <td>Ø¢Ù¾ØªØ§ÛŒÙ…</td>
                                    <td>99.9%</td>
                                    <td>99.9%</td>
                                    <td>99.9%</td>
                                </tr>
                                <tr>
                                    <td>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§ÙˆÙ„ÙˆÛŒØªÛŒ</td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-times"></i></td>
                                    <td><i class="fas fa-check"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Upgrade Button -->
                    {% if not has_pro_plan %}
                    <div class="upgrade-section">
                        <h3>Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±ØªÙ‚Ø§Ø¡ Ø¯Ù‡ÛŒØ¯ØŸ</h3>
                        <p>Ø¨Ø§ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ… Ù…Ø§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ùˆ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯</p>
                        <button class="btn btn-primary btn-large">
                            <i class="fas fa-crown"></i> Ø§Ø±ØªÙ‚Ø§Ø¡ Ø¨Ù‡ VIP
                        </button>
                    </div>
                    {% endif %}
                </section>



                <!-- 6. SECURITY SECTION -->

            </div>
        </main>
    </div>

    <!-- Modal for Edit Profile -->
    <div class="modal" id="editProfileModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</h2>
                <button class="close-btn" id="closeProfileModal">Ã—</button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm" class="settings-form">
                    <div class="form-group">
                        <label for="modalFirstName">Ù†Ø§Ù…</label>
                        <input type="text" id="modalFirstName" placeholder="Ù†Ø§Ù…">
                    </div>
                    <div class="form-group">
                        <label for="modalLastName">Ù†Ø§Ù…â€ŒØ®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                        <input type="text" id="modalLastName" placeholder="Ù†Ø§Ù…â€ŒØ®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
                    </div>
                    <div class="form-group">
                        <label for="modalPhone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                        <input type="tel" id="modalPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
                    </div>
                    <div class="form-group">
                        <label for="modalBio">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†</label>
                        <textarea id="modalBio" rows="4" placeholder="Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø®ÙˆØ¯ØªØ§Ù† Ø¨Ú¯ÙˆÛŒÛŒØ¯"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelProfileBtn">Ù„ØºÙˆ</button>
                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </div>
        </div>
    </div>

    <!-- Modal for Change Password -->
    <div class="modal" id="changePasswordModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ØªØºÛŒÛŒØ± Ø±Ù…Ø²Ø¹Ø¨ÙˆØ±</h2>
                <button class="close-btn">Ã—</button>
            </div>
            <div class="modal-body">
                <form class="settings-form">
                    <div class="form-group">
                        <label for="currentPassword">Ø±Ù…Ø²Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ</label>
                        <input type="password" id="currentPassword" placeholder="Ø±Ù…Ø²Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">Ø±Ù…Ø²Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
                        <input type="password" id="newPassword" placeholder="Ø±Ù…Ø²Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">ØªØ£ÛŒÛŒØ¯ Ø±Ù…Ø²Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" id="confirmPassword" placeholder="Ø±Ù…Ø²Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ú©Ù†ÛŒØ¯">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary">Ù„ØºÙˆ</button>
                <button class="btn btn-primary">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ù…Ø²Ø¹Ø¨ÙˆØ±</button>
            </div>
        </div>
    </div>
<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        alert('Ù„ÛŒÙ†Ú© Ú©Ù¾ÛŒ Ø´Ø¯!');
    });
}

function downloadQRCode() {
    const link = document.createElement('a');
    const cardUrl = document.getElementById('cardUrl').value;
    link.href = `https://api.qrserver.com/v1/create-qr-code/?size=500x500&data=${cardUrl}`;
    link.download = 'card-qr-code.png';
    link.click();
}

function shareOnTelegram(url) {
    window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}`, '_blank');
}

function shareOnWhatsApp(url) {
    window.open(`https://wa.me/?text=${encodeURIComponent(url)}`, '_blank');
}

function shareOnTwitter(url) {
    window.open(`https://x.com/intent/post?url=${encodeURIComponent(url)}`, '_blank');
}

function shareViaEmail(url) {
    window.location.href = `mailto:?subject=Ú©Ø§Ø±Øª Ø¯ÛŒØ¬ÛŒØªØ§Ù„ÛŒ Ù…Ù†&body=${encodeURIComponent(url)}`;
}
</script>
<style>
    .expiry-date {
    font-weight: 600;
}

.expiry-date.active {
    color: #22c55e; /* Ø³Ø¨Ø² */
}

.expiry-date.expired {
    color: #ef4444; /* Ù‚Ø±Ù…Ø² */
}

.expiry-date.unlimited {
    color: #6366f1; /* Ø¨Ù†ÙØ´ */
}

</style>
    <!-- Script -->
    <script src="{% static 'dashboard.js' %}"></script>
</body>
</html>